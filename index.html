<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title></title>

  <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="tab-container">

    <!-- Sticky Wrapper -->
    <div class="sticky-area">
      <header class="site-header">
        <h1 id="site-title"></h1>
      </header>

      <div class="tabs">
        <div class="tab active" data-tab="spiel">ğŸ® Zum Spiel</div>
        <div class="tab" data-tab="rezepte">ğŸ² Rezepte</div>
        <div class="tab" data-tab="playlist">ğŸµ Playlist</div>
        <div class="tab" data-tab="kontakt">âœ‰ï¸ Kontakt</div>
        <div class="tab" data-tab="feedback">ğŸ’¬ Feedback</div>
      </div>
    </div>

    <!-- CONTENT -->
    <div id="spiel" class="tab-content active">
      <h1>Zum Spiel</h1>
      <h2>EinfÃ¼hrung</h2>
      <p>
        Vielen Dank fÃ¼r Ihren Kauf!
      </p>

      <p>
Mit unserem Krimidinner haben Sie den ersten Schritt zu einem spannenden Abend voller Geheimnisse, VerdÃ¤chtigungen und Ã¼berraschender Wendungen gemacht. Wir wÃ¼nschen Ihnen und Ihren GÃ¤sten ein unvergessliches Erlebnis, mit raffinierten Ermittlungen, spannenden GesprÃ¤chen und natÃ¼rlich jeder Menge SpaÃŸ.
</p>

      <p>
Nachdem das letzte RÃ¤tsel gelÃ¶st ist, wÃ¼rden wir uns sehr Ã¼ber Ihr Feedback freuen. Bitte bewerten Sie unser Spiel unter dem Button â€FEEDBACKâ€œ. Vielen Dank, dass Sie sich dafÃ¼r einen Moment Zeit nehmen!
      </p>

      <p>
        <video controls width="640">
        <source src="VID-20260223-WA0013.mp4" type="video/mp4">
        Ihr Browser unterstÃ¼tzt das Video-Tag nicht.
        </video>
      </p>
    </div>

    <div id="rezepte" class="tab-content">
      <h1>Rezepte</h1>
      
     <h2>Rezept auswÃ¤hlen</h2>

<select id="recipe-select">
  <option value="">-- Bitte auswÃ¤hlen --</option>
  <option value="pasta">Spaghetti Aglio e Olio</option>
  <option value="burger">Classic Burger</option>
  <option value="salad">Caesar Salad</option>
</select>

<div id="recipe-display" class="recipe-box"></div>
</div>
    <div id="playlist" class="tab-content">
      <h1>Playlist</h1>
      <h2>Playlist: </h2>
      <p>Hier finden Sie eine Playlist, die wir fÃ¼r Sie als Hintergrundmusik erstellt haben.</p>
        <a href="https://open.spotify.com/user/31jauev4dg577jqzkbg6bwzoc75a?si=hFBzZ78uSPuwEm0wk5K8mg" target="_blank">
  Spotify Playlist "The chef's last course"
</a>
      
    </div>

    <div id="kontakt" class="tab-content">
      <h1>Kontakt</h1>
      
      <h2>Kontakt â€“ Infos:
      </h2>

      <p>E-Mail: info.whodineit@gmail.com</p>
      <p>TikTok: whodineit_hblw</p>
      <p>Instagram: whodineit_hblw</p>
      <p>Wallerer StraÃŸe 32, 4600 Wels</p>

      <img src="IMG-20260223-WA0012.jpg" alt="Teamfoto" class="mein-bild">
</p>
    </div>

    <div id="feedback" class="tab-content">
      <h1>Feedback Forum</h1>
      <h2>Feedback: </h2>
      <!-- â­ Neue Feedback Section â­ -->
<div class="feedback-section">
  <h3>Wie hat dir unser Spiel gefallen?</h3>
  <div class="star-rating">
    <span class="star" data-value="1">â˜…</span>
    <span class="star" data-value="2">â˜…</span>
    <span class="star" data-value="3">â˜…</span>
    <span class="star" data-value="4">â˜…</span>
    <span class="star" data-value="5">â˜…</span>
  </div>

  <textarea id="feedback-text" placeholder="Dein Feedbackâ€¦"></textarea>

  <button id="feedback-submit">Absenden</button>

  <div id="feedback-result"></div>

<hr>
<h3>Alle Bewertungen</h3>
<div id="all-feedback"></div>

</div>
    </div>

  </div>

  <script src="tabs.js"></script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import {
  getFirestore,
  collection,
  addDoc,
  getDocs,
  query,
  orderBy
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

/* ================= FIREBASE INIT ================= */

  const firebaseConfig = {
    apiKey: "AIzaSyAauE9-PkuAAM74saEWi5P87vY56k2XnhE",
    authDomain: "whodineitdatabase.firebaseapp.com",
    projectId: "whodineitdatabase",
    storageBucket: "whodineitdatabase.firebasestorage.app",
    messagingSenderId: "576402969281",
    appId: "1:576402969281:web:d0a81531c624daadecfa40",
    measurementId: "G-CXXW809K7P"
  };

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ================= FEEDBACK LOGIK ================= */

const feedbackContainer = document.getElementById("all-feedback");

async function loadFeedback() {
  if (!feedbackContainer) return;

  feedbackContainer.innerHTML = "";

  const q = query(collection(db, "feedback"), orderBy("date", "desc"));
  const snapshot = await getDocs(q);

  snapshot.forEach((doc) => {
    const data = doc.data();

    const div = document.createElement("div");
    div.classList.add("feedback-item");

    div.innerHTML = `
      <div class="feedback-stars">${"â˜…".repeat(data.rating)}</div>
      <div class="feedback-text">${data.text}</div>
    `;

    feedbackContainer.appendChild(div);
  });
}

/* ================= SAVE FEEDBACK ================= */

const submitBtn = document.getElementById("feedback-submit");
const textInput = document.getElementById("feedback-text");

submitBtn?.addEventListener("click", async () => {

  const text = textInput.value.trim();

  if (typeof ratingValue === "undefined" || ratingValue === 0 || text === "") {
    document.getElementById("feedback-result").textContent =
      "Bitte Sterne auswÃ¤hlen und Text eingeben!";
    return;
  }

  await addDoc(collection(db, "feedback"), {
    rating: ratingValue,
    text: text,
    date: new Date()
  });

  textInput.value = "";
  ratingValue = 0;

  stars.forEach(s => s.classList.remove("selected"));

  document.getElementById("feedback-result").textContent =
    "Danke fÃ¼r dein Feedback!";

  loadFeedback();
});

/* ================= LOAD ON START ================= */

document.addEventListener("DOMContentLoaded", loadFeedback);

</script>

 
</body>
</html>
